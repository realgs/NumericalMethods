{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 206,
   "metadata": {},
   "outputs": [],
   "source": [
    "import requests\n",
    "import json\n",
    "import time\n",
    "import os"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 189,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "200\n"
     ]
    }
   ],
   "source": [
    "r = requests.get('https://bitbay.net/API/Public/BTC/trades.json')\n",
    "print(r.status_code)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 193,
   "metadata": {},
   "outputs": [],
   "source": [
    "def jprint(obj):\n",
    "    text = json.dumps(obj, sort_keys=True, indent=4)\n",
    "    print(text)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 190,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[\n",
      "    {\n",
      "        \"amount\": 0.117858,\n",
      "        \"date\": 1400230002,\n",
      "        \"price\": 446.67,\n",
      "        \"tid\": \"0\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0823241,\n",
      "        \"date\": 1400230012,\n",
      "        \"price\": 446.67,\n",
      "        \"tid\": \"1\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0657015,\n",
      "        \"date\": 1400230023,\n",
      "        \"price\": 446.67,\n",
      "        \"tid\": \"2\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.06795,\n",
      "        \"date\": 1400230048,\n",
      "        \"price\": 446.59,\n",
      "        \"tid\": \"3\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.17960501,\n",
      "        \"date\": 1400230111,\n",
      "        \"price\": 446.55,\n",
      "        \"tid\": \"4\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.109718,\n",
      "        \"date\": 1400230156,\n",
      "        \"price\": 446.6,\n",
      "        \"tid\": \"5\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.223914,\n",
      "        \"date\": 1400230165,\n",
      "        \"price\": 446.6,\n",
      "        \"tid\": \"6\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.32798201,\n",
      "        \"date\": 1400230332,\n",
      "        \"price\": 446.55,\n",
      "        \"tid\": \"7\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0474541,\n",
      "        \"date\": 1400230338,\n",
      "        \"price\": 446.6,\n",
      "        \"tid\": \"8\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.37618399,\n",
      "        \"date\": 1400230375,\n",
      "        \"price\": 446.59,\n",
      "        \"tid\": \"9\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.30691701,\n",
      "        \"date\": 1400230382,\n",
      "        \"price\": 446.55,\n",
      "        \"tid\": \"10\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0499402,\n",
      "        \"date\": 1400230428,\n",
      "        \"price\": 446.3,\n",
      "        \"tid\": \"11\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.063362,\n",
      "        \"date\": 1400230459,\n",
      "        \"price\": 446.3,\n",
      "        \"tid\": \"12\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0562178,\n",
      "        \"date\": 1400230476,\n",
      "        \"price\": 446.3,\n",
      "        \"tid\": \"13\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.13658801,\n",
      "        \"date\": 1400230608,\n",
      "        \"price\": 446.29,\n",
      "        \"tid\": \"14\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.85142601,\n",
      "        \"date\": 1400230664,\n",
      "        \"price\": 446.31,\n",
      "        \"tid\": \"15\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.123233,\n",
      "        \"date\": 1400230684,\n",
      "        \"price\": 446.31,\n",
      "        \"tid\": \"16\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.40727001,\n",
      "        \"date\": 1400230696,\n",
      "        \"price\": 446.29,\n",
      "        \"tid\": \"17\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0658345,\n",
      "        \"date\": 1400230708,\n",
      "        \"price\": 446.29,\n",
      "        \"tid\": \"18\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0974883,\n",
      "        \"date\": 1400230816,\n",
      "        \"price\": 446.31,\n",
      "        \"tid\": \"19\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.55380702,\n",
      "        \"date\": 1400230875,\n",
      "        \"price\": 446.29,\n",
      "        \"tid\": \"20\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.15532599,\n",
      "        \"date\": 1400230969,\n",
      "        \"price\": 446.31,\n",
      "        \"tid\": \"21\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.834243,\n",
      "        \"date\": 1400231018,\n",
      "        \"price\": 446.29,\n",
      "        \"tid\": \"22\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0837031,\n",
      "        \"date\": 1400231063,\n",
      "        \"price\": 446.59,\n",
      "        \"tid\": \"23\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.354314,\n",
      "        \"date\": 1400231121,\n",
      "        \"price\": 446.99,\n",
      "        \"tid\": \"24\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.43353301,\n",
      "        \"date\": 1400231224,\n",
      "        \"price\": 446.64,\n",
      "        \"tid\": \"25\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0695504,\n",
      "        \"date\": 1400231238,\n",
      "        \"price\": 447.7,\n",
      "        \"tid\": \"26\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0786383,\n",
      "        \"date\": 1400231254,\n",
      "        \"price\": 446.18,\n",
      "        \"tid\": \"27\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.199119,\n",
      "        \"date\": 1400231262,\n",
      "        \"price\": 446.18,\n",
      "        \"tid\": \"28\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0564867,\n",
      "        \"date\": 1400231272,\n",
      "        \"price\": 446.18,\n",
      "        \"tid\": \"29\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0510159,\n",
      "        \"date\": 1400231286,\n",
      "        \"price\": 447.9,\n",
      "        \"tid\": \"30\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.246426,\n",
      "        \"date\": 1400231296,\n",
      "        \"price\": 446.18,\n",
      "        \"tid\": \"31\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.12941,\n",
      "        \"date\": 1400231306,\n",
      "        \"price\": 446.18,\n",
      "        \"tid\": \"32\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.30946401,\n",
      "        \"date\": 1400232643,\n",
      "        \"price\": 448.08,\n",
      "        \"tid\": \"33\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.111572,\n",
      "        \"date\": 1400232789,\n",
      "        \"price\": 448.14,\n",
      "        \"tid\": \"34\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0895814,\n",
      "        \"date\": 1400233113,\n",
      "        \"price\": 446.11,\n",
      "        \"tid\": \"35\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0517398,\n",
      "        \"date\": 1400235739,\n",
      "        \"price\": 446.69,\n",
      "        \"tid\": \"36\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.124217,\n",
      "        \"date\": 1400235781,\n",
      "        \"price\": 446.69,\n",
      "        \"tid\": \"37\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0490042,\n",
      "        \"date\": 1400235851,\n",
      "        \"price\": 446.9,\n",
      "        \"tid\": \"38\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0540433,\n",
      "        \"date\": 1400235932,\n",
      "        \"price\": 446.9,\n",
      "        \"tid\": \"39\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.39539701,\n",
      "        \"date\": 1400235969,\n",
      "        \"price\": 446.7,\n",
      "        \"tid\": \"40\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.101232,\n",
      "        \"date\": 1400236026,\n",
      "        \"price\": 446.7,\n",
      "        \"tid\": \"41\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.943371,\n",
      "        \"date\": 1400236106,\n",
      "        \"price\": 446.7,\n",
      "        \"tid\": \"42\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 1.62143004,\n",
      "        \"date\": 1400236160,\n",
      "        \"price\": 446.9,\n",
      "        \"tid\": \"43\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.101455,\n",
      "        \"date\": 1400242237,\n",
      "        \"price\": 447.56,\n",
      "        \"tid\": \"44\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.116085,\n",
      "        \"date\": 1400242280,\n",
      "        \"price\": 447.05,\n",
      "        \"tid\": \"45\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.0863228,\n",
      "        \"date\": 1400242290,\n",
      "        \"price\": 447.05,\n",
      "        \"tid\": \"46\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.378775,\n",
      "        \"date\": 1400242303,\n",
      "        \"price\": 447.05,\n",
      "        \"tid\": \"47\",\n",
      "        \"type\": \"sell\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.15842301,\n",
      "        \"date\": 1400242310,\n",
      "        \"price\": 447.9,\n",
      "        \"tid\": \"48\",\n",
      "        \"type\": \"buy\"\n",
      "    },\n",
      "    {\n",
      "        \"amount\": 0.123985,\n",
      "        \"date\": 1400242335,\n",
      "        \"price\": 447.05,\n",
      "        \"tid\": \"49\",\n",
      "        \"type\": \"sell\"\n",
      "    }\n",
      "]\n"
     ]
    }
   ],
   "source": [
    "jprint(r.json())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 205,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "0.99919\n"
     ]
    },
    {
     "ename": "NameError",
     "evalue": "name 'system' is not defined",
     "output_type": "error",
     "traceback": [
      "\u001b[1;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[1;31mNameError\u001b[0m                                 Traceback (most recent call last)",
      "\u001b[1;32m<ipython-input-205-385ad56829a8>\u001b[0m in \u001b[0;36m<module>\u001b[1;34m\u001b[0m\n\u001b[0;32m     11\u001b[0m         \u001b[0mprint\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mround\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;36m1\u001b[0m \u001b[1;33m-\u001b[0m \u001b[1;33m(\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0ms\u001b[0m\u001b[1;33m-\u001b[0m\u001b[0mb\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m/\u001b[0m\u001b[0mb\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m,\u001b[0m \u001b[1;36m5\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m     12\u001b[0m         \u001b[0mtime\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0msleep\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;36m5\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m---> 13\u001b[1;33m         \u001b[0msystem\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;34m'cls'\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m     14\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m     15\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;31mNameError\u001b[0m: name 'system' is not defined"
     ]
    }
   ],
   "source": [
    "status = 0\n",
    "while(status==0):\n",
    "    r = requests.get('https://bitbay.net/API/Public/BTC/trades.json')\n",
    "    data = r.json()\n",
    "    for i in data:\n",
    "        if i['type'] == 'sell':\n",
    "            s = i['price']\n",
    "        elif i['type'] == 'buy':\n",
    "            b = i['price']\n",
    "        \n",
    "        print(round(1 - ((s-b)/b), 5))\n",
    "        time.sleep(5)\n",
    "        os.system('cls')\n",
    "        \n",
    "            "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
